\hypertarget{classInferenceEngine_1_1Extensions_1_1Cpu_1_1CTCGreedyDecoderImpl}{}\section{Inference\+Engine\+:\+:Extensions\+:\+:Cpu\+:\+:C\+T\+C\+Greedy\+Decoder\+Impl Class Reference}
\label{classInferenceEngine_1_1Extensions_1_1Cpu_1_1CTCGreedyDecoderImpl}\index{Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl@{Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl}}


Inheritance diagram for Inference\+Engine\+:\+:Extensions\+:\+:Cpu\+:\+:C\+T\+C\+Greedy\+Decoder\+Impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=235pt]{classInferenceEngine_1_1Extensions_1_1Cpu_1_1CTCGreedyDecoderImpl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Inference\+Engine\+:\+:Extensions\+:\+:Cpu\+:\+:C\+T\+C\+Greedy\+Decoder\+Impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{classInferenceEngine_1_1Extensions_1_1Cpu_1_1CTCGreedyDecoderImpl__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1CTCGreedyDecoderImpl_aebd2c0abf6bfdcf39389959637a2465f}{C\+T\+C\+Greedy\+Decoder\+Impl} (const C\+N\+N\+Layer $\ast$layer)
\item 
Status\+Code \hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1CTCGreedyDecoderImpl_a1a081d08857bf9f13cb49a7d4468e894}{execute} (std\+::vector$<$ Blob\+::\+Ptr $>$ \&inputs, std\+::vector$<$ Blob\+::\+Ptr $>$ \&outputs, Response\+Desc $\ast$resp) noexceptoverride
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 28 of file ext\+\_\+ctc\+\_\+greedy.\+cpp.



\subsection{Constructor \& Destructor Documentation}
\index{Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl@{Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl}!C\+T\+C\+Greedy\+Decoder\+Impl@{C\+T\+C\+Greedy\+Decoder\+Impl}}
\index{C\+T\+C\+Greedy\+Decoder\+Impl@{C\+T\+C\+Greedy\+Decoder\+Impl}!Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl@{Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl}}
\subsubsection[{\texorpdfstring{C\+T\+C\+Greedy\+Decoder\+Impl(const C\+N\+N\+Layer $\ast$layer)}{CTCGreedyDecoderImpl(const CNNLayer *layer)}}]{\setlength{\rightskip}{0pt plus 5cm}Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl\+::\+C\+T\+C\+Greedy\+Decoder\+Impl (
\begin{DoxyParamCaption}
\item[{const C\+N\+N\+Layer $\ast$}]{layer}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}\hypertarget{classInferenceEngine_1_1Extensions_1_1Cpu_1_1CTCGreedyDecoderImpl_aebd2c0abf6bfdcf39389959637a2465f}{}\label{classInferenceEngine_1_1Extensions_1_1Cpu_1_1CTCGreedyDecoderImpl_aebd2c0abf6bfdcf39389959637a2465f}


Definition at line 30 of file ext\+\_\+ctc\+\_\+greedy.\+cpp.


\begin{DoxyCode}
30                                                         : \hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1ExtLayerBase_affff0e8263ca26852ccf71d299d7b06a}{ExtLayerBase}(layer) \{
31         \textcolor{keywordflow}{try} \{
32             \textcolor{keywordflow}{if} (\hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1ExtLayerBase_a1074cdccacb9e9ca6eec01bbc2f7ca4a}{cnnLayer}.insData.empty() || \hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1ExtLayerBase_a1074cdccacb9e9ca6eec01bbc2f7ca4a}{cnnLayer}.outData.size() != 1)
33                 THROW\_IE\_EXCEPTION << \textcolor{stringliteral}{"Incorrect number of input/output edges!"};
34 
35             std::vector<DataConfigurator> inps;
36             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} &in : \hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1ExtLayerBase_a1074cdccacb9e9ca6eec01bbc2f7ca4a}{cnnLayer}.insData)
37                 inps.emplace\_back(\hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1ExtLayerBase_a1258a8d209e0249e0b1717618352ddfba446687ea2db1ada75be5ed053be77f59}{ConfLayout::PLN});
38             \hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1ExtLayerBase_a0ac7a6632e95b9500d5246b05b4b0bfa}{addConfig}(inps, \{DataConfigurator(\hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1ExtLayerBase_a1258a8d209e0249e0b1717618352ddfba446687ea2db1ada75be5ed053be77f59}{ConfLayout::PLN})\});
39         \} \textcolor{keywordflow}{catch} (InferenceEngine::details::InferenceEngineException &ex) \{
40             \hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1ExtLayerBase_abc78e9b5a79fa339ffd831a5318f71f7}{errorMsg} = ex.what();
41         \}
42     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl@{Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl}!execute@{execute}}
\index{execute@{execute}!Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl@{Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl}}
\subsubsection[{\texorpdfstring{execute(std\+::vector$<$ Blob\+::\+Ptr $>$ \&inputs, std\+::vector$<$ Blob\+::\+Ptr $>$ \&outputs, Response\+Desc $\ast$resp) noexceptoverride}{execute(std::vector< Blob::Ptr > &inputs, std::vector< Blob::Ptr > &outputs, ResponseDesc *resp) noexceptoverride}}]{\setlength{\rightskip}{0pt plus 5cm}Status\+Code Inference\+Engine\+::\+Extensions\+::\+Cpu\+::\+C\+T\+C\+Greedy\+Decoder\+Impl\+::execute (
\begin{DoxyParamCaption}
\item[{std\+::vector$<$ Blob\+::\+Ptr $>$ \&}]{inputs, }
\item[{std\+::vector$<$ Blob\+::\+Ptr $>$ \&}]{outputs, }
\item[{Response\+Desc $\ast$}]{resp}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [noexcept]}}\hypertarget{classInferenceEngine_1_1Extensions_1_1Cpu_1_1CTCGreedyDecoderImpl_a1a081d08857bf9f13cb49a7d4468e894}{}\label{classInferenceEngine_1_1Extensions_1_1Cpu_1_1CTCGreedyDecoderImpl_a1a081d08857bf9f13cb49a7d4468e894}


Definition at line 44 of file ext\+\_\+ctc\+\_\+greedy.\+cpp.


\begin{DoxyCode}
45                                                              \{
46         \textcolor{keywordflow}{if} ((inputs.size() != 1 && inputs.size() != 2) || outputs.empty()) \{
47             \textcolor{keywordflow}{if} (resp) \{
48                 std::string \hyperlink{classInferenceEngine_1_1Extensions_1_1Cpu_1_1ExtLayerBase_abc78e9b5a79fa339ffd831a5318f71f7}{errorMsg} = \textcolor{stringliteral}{"Incorrect number of input or output edges!"};
49                 errorMsg.copy(resp->msg, \textcolor{keyword}{sizeof}(resp->msg) - 1);
50             \}
51             \textcolor{keywordflow}{return} GENERAL\_ERROR;
52         \}
53         \textcolor{keyword}{const} \textcolor{keywordtype}{float}* probabilities = inputs[0]->buffer();
54         \textcolor{keyword}{const} \textcolor{keywordtype}{float}* sequence\_indicators = inputs[1]->buffer();
55         \textcolor{keywordtype}{float}* output\_sequences = outputs[0]->buffer();
56 
57         \textcolor{keywordtype}{size\_t} T\_ = inputs[0]->getTensorDesc().getDims()[0];
58         \textcolor{keywordtype}{size\_t} N\_ = inputs[0]->getTensorDesc().getDims()[1];
59         \textcolor{keywordtype}{size\_t} C\_ = inputs[0]->getTensorDesc().getDims()[2];
60 
61         \textcolor{comment}{// Fill output\_sequences with -1}
62         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} ii = 0; ii < T\_*N\_; ii++) \{
63             output\_sequences[ii] = -1;
64         \}
65 
66         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} n = 0; n < N\_; ++n) \{
67             \textcolor{keywordtype}{int} prev\_class\_idx = -1;
68             \textcolor{keywordtype}{size\_t} output\_index = n*T\_;
69 
70             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} t = 0; \textcolor{comment}{/* check at end */}; ++t) \{
71                 \textcolor{comment}{// get maximum probability and its index}
72                 \textcolor{keywordtype}{int} max\_class\_idx = 0;
73 
74                 \textcolor{keyword}{const} \textcolor{keywordtype}{float}* probs = probabilities + t*C\_*N\_ + n*C\_;
75                 \textcolor{keywordtype}{float} max\_prob = probs[0];
76                 ++probs;
77 
78                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \hyperlink{CMakeCache_8txt_aac1d6a1710812201527c735f7c6afbaa}{c} = 1; \hyperlink{CMakeCache_8txt_aac1d6a1710812201527c735f7c6afbaa}{c} < C\_; ++\hyperlink{CMakeCache_8txt_aac1d6a1710812201527c735f7c6afbaa}{c}, ++probs) \{
79                     \textcolor{keywordflow}{if} (*probs > max\_prob) \{
80                         max\_class\_idx = \hyperlink{CMakeCache_8txt_aac1d6a1710812201527c735f7c6afbaa}{c};
81                         max\_prob = *probs;
82                     \}
83                 \}
84 
85                 \textcolor{keywordflow}{if} (max\_class\_idx < C\_-1 && max\_class\_idx != prev\_class\_idx) \{
86                     output\_sequences[output\_index] =  max\_class\_idx;
87                     output\_index++;
88                 \}
89 
90                 prev\_class\_idx = max\_class\_idx;
91 
92                 \textcolor{keywordflow}{if} (t + 1 == T\_ || sequence\_indicators[(t + 1)*N\_ + n] == 0) \{
93                     \textcolor{keywordflow}{break};
94                 \}
95             \}
96         \}
97         \textcolor{keywordflow}{return} OK;
98     \}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
thirdparty/extension/\hyperlink{ext__ctc__greedy_8cpp}{ext\+\_\+ctc\+\_\+greedy.\+cpp}\end{DoxyCompactItemize}
