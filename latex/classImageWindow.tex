\hypertarget{classImageWindow}{}\section{Image\+Window Class Reference}
\label{classImageWindow}\index{Image\+Window@{Image\+Window}}


{\ttfamily \#include $<$output.\+h$>$}



Inheritance diagram for Image\+Window\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=159pt]{classImageWindow__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Image\+Window\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=159pt]{classImageWindow__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classImageWindow_a5594e0624586cf492d52ee353348fa6d}{Image\+Window} (const std\+::string \&window\+\_\+name, \hyperlink{CMakeCache_8txt_a79a3d8790b2588b09777910863574e09}{int})
\item 
void \hyperlink{classImageWindow_a26fa3309cf79914dfe09b3b42b85e49e}{prepare\+Data} (const \hyperlink{structInferenceResult_1_1FaceDetectionResult}{Inference\+Result\+::\+Face\+Detection\+Result} \&) override
\item 
void \hyperlink{classImageWindow_a4fdaf7f1728e60672c22ddf57a4071b1}{prepare\+Data} (const \hyperlink{structInferenceResult_1_1EmotionsResult}{Inference\+Result\+::\+Emotions\+Result} \&) override
\item 
void \hyperlink{classImageWindow_a09a86f7b0c0e0eec807a4e1458a057c1}{prepare\+Data} (const \hyperlink{structInferenceResult_1_1AgeGenderResult}{Inference\+Result\+::\+Age\+Gender\+Result} \&) override
\item 
void \hyperlink{classImageWindow_abb0b9b0c103ec0460a2cbeee414b53c4}{prepare\+Data} (const \hyperlink{structInferenceResult_1_1HeadPoseResult}{Inference\+Result\+::\+Head\+Pose\+Result} \&) override
\item 
void \hyperlink{classImageWindow_a802e96acaba82b2f83eb3184c702fbcc}{feed\+Frame} (const cv\+::\+Mat \&) override
\item 
void \hyperlink{classImageWindow_a2927e0003c1f4579fb59aff50a9c7de3}{handle\+Output} (const std\+::string \&overall\+\_\+output\+\_\+text) override
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 30 of file output.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{Image\+Window@{Image\+Window}!Image\+Window@{Image\+Window}}
\index{Image\+Window@{Image\+Window}!Image\+Window@{Image\+Window}}
\subsubsection[{\texorpdfstring{Image\+Window(const std\+::string \&window\+\_\+name, int)}{ImageWindow(const std::string &window_name, int)}}]{\setlength{\rightskip}{0pt plus 5cm}Image\+Window\+::\+Image\+Window (
\begin{DoxyParamCaption}
\item[{const std\+::string \&}]{window\+\_\+name, }
\item[{{\bf int}}]{focal\+\_\+length}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [explicit]}}\hypertarget{classImageWindow_a5594e0624586cf492d52ee353348fa6d}{}\label{classImageWindow_a5594e0624586cf492d52ee353348fa6d}


Definition at line 7 of file output.\+cpp.


\begin{DoxyCode}
8                                                     :
9     window\_name\_(window\_name), focal\_length\_(focal\_length) \{
10   cv::namedWindow(window\_name, cv::WINDOW\_AUTOSIZE);
11 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Image\+Window@{Image\+Window}!feed\+Frame@{feed\+Frame}}
\index{feed\+Frame@{feed\+Frame}!Image\+Window@{Image\+Window}}
\subsubsection[{\texorpdfstring{feed\+Frame(const cv\+::\+Mat \&) override}{feedFrame(const cv::Mat &) override}}]{\setlength{\rightskip}{0pt plus 5cm}void Image\+Window\+::feed\+Frame (
\begin{DoxyParamCaption}
\item[{const cv\+::\+Mat \&}]{frame}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classImageWindow_a802e96acaba82b2f83eb3184c702fbcc}{}\label{classImageWindow_a802e96acaba82b2f83eb3184c702fbcc}


Reimplemented from \hyperlink{classBaseOutput_acdcbc58abecbf5671b1705937cd1cf02}{Base\+Output}.



Definition at line 13 of file output.\+cpp.


\begin{DoxyCode}
13                                               \{
14   frame\_ = frame;
15 \}
\end{DoxyCode}
\index{Image\+Window@{Image\+Window}!handle\+Output@{handle\+Output}}
\index{handle\+Output@{handle\+Output}!Image\+Window@{Image\+Window}}
\subsubsection[{\texorpdfstring{handle\+Output(const std\+::string \&overall\+\_\+output\+\_\+text) override}{handleOutput(const std::string &overall_output_text) override}}]{\setlength{\rightskip}{0pt plus 5cm}void Image\+Window\+::handle\+Output (
\begin{DoxyParamCaption}
\item[{const std\+::string \&}]{overall\+\_\+output\+\_\+text}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classImageWindow_a2927e0003c1f4579fb59aff50a9c7de3}{}\label{classImageWindow_a2927e0003c1f4579fb59aff50a9c7de3}


Implements \hyperlink{classBaseOutput_ac516cfd7a05af7d710b5dd44d5b79878}{Base\+Output}.



Definition at line 166 of file output.\+cpp.


\begin{DoxyCode}
166                                                                    \{
167   cv::putText(frame\_,
168               overall\_output\_text,
169               cv::Point2f(0, 65),
170               cv::FONT\_HERSHEY\_TRIPLEX,
171               0.5,
172               cv::Scalar(255, 0, 0));
173   cv::imshow(window\_name\_, frame\_);
174 \}\end{DoxyCode}
\index{Image\+Window@{Image\+Window}!prepare\+Data@{prepare\+Data}}
\index{prepare\+Data@{prepare\+Data}!Image\+Window@{Image\+Window}}
\subsubsection[{\texorpdfstring{prepare\+Data(const Inference\+Result\+::\+Face\+Detection\+Result \&) override}{prepareData(const InferenceResult::FaceDetectionResult &) override}}]{\setlength{\rightskip}{0pt plus 5cm}void Image\+Window\+::prepare\+Data (
\begin{DoxyParamCaption}
\item[{const {\bf Inference\+Result\+::\+Face\+Detection\+Result} \&}]{result}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classImageWindow_a26fa3309cf79914dfe09b3b42b85e49e}{}\label{classImageWindow_a26fa3309cf79914dfe09b3b42b85e49e}


Implements \hyperlink{classBaseOutput_ac8e9c0077758e64648fd1bd28661dec7}{Base\+Output}.



Definition at line 18 of file output.\+cpp.


\begin{DoxyCode}
18                                                                          \{
19   std::ostringstream out;
20   cv::Rect rect = result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location};
21 
22   out.str(\textcolor{stringliteral}{""});
23   \textcolor{keywordflow}{if} (result.\hyperlink{structInferenceResult_1_1FaceDetectionResult_a7df2ce07767a0ef2c7b3ca27e9e20bc0}{confidence} >= 0) \{
24     out << \textcolor{stringliteral}{"face detection confidence: "}
25         << result.\hyperlink{structInferenceResult_1_1FaceDetectionResult_a395efa90912c78ac770588b57a474bd3}{label} << \textcolor{stringliteral}{": "}
26         << \hyperlink{CMakeCache_8txt_a4a461500e9bc62f37d07d326b178ef08}{std::fixed} << std::setprecision(3)
27         << result.\hyperlink{structInferenceResult_1_1FaceDetectionResult_a7df2ce07767a0ef2c7b3ca27e9e20bc0}{confidence} << \textcolor{stringliteral}{","};
28   \}
29   cv::putText(frame\_,
30               out.str(),
31               cv::Point2f(result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location}.x, result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location}.y - 15),
32               cv::FONT\_HERSHEY\_COMPLEX\_SMALL,
33               0.8,
34               cv::Scalar(0, 0, 255));
35   cv::rectangle(frame\_, result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location}, cv::Scalar(100, 100, 100), 1);
36 \}
\end{DoxyCode}
\index{Image\+Window@{Image\+Window}!prepare\+Data@{prepare\+Data}}
\index{prepare\+Data@{prepare\+Data}!Image\+Window@{Image\+Window}}
\subsubsection[{\texorpdfstring{prepare\+Data(const Inference\+Result\+::\+Emotions\+Result \&) override}{prepareData(const InferenceResult::EmotionsResult &) override}}]{\setlength{\rightskip}{0pt plus 5cm}void Image\+Window\+::prepare\+Data (
\begin{DoxyParamCaption}
\item[{const {\bf Inference\+Result\+::\+Emotions\+Result} \&}]{result}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classImageWindow_a4fdaf7f1728e60672c22ddf57a4071b1}{}\label{classImageWindow_a4fdaf7f1728e60672c22ddf57a4071b1}


Implements \hyperlink{classBaseOutput_a67d7a495441233da42b134667a312202}{Base\+Output}.



Definition at line 38 of file output.\+cpp.


\begin{DoxyCode}
38                                                                          \{
39   std::ostringstream out;
40   cv::Rect rect = result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location};
41 
42   out.str(\textcolor{stringliteral}{""});
43   out << \textcolor{stringliteral}{"emotions detection confidence: "} <<
44       result.\hyperlink{structInferenceResult_1_1EmotionsResult_a273570a13673f51115a9de954cb0d333}{label} << \textcolor{stringliteral}{": "} <<
45       \hyperlink{CMakeCache_8txt_a4a461500e9bc62f37d07d326b178ef08}{std::fixed} << std::setprecision(3) <<
46       result.\hyperlink{structInferenceResult_1_1EmotionsResult_aec1805367ebc6acda383d180a3cc896e}{confidence} << \textcolor{stringliteral}{","};
47   cv::putText(frame\_,
48               out.str(),
49               cv::Point2f(result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location}.x, result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location}.y - 15),
50               cv::FONT\_HERSHEY\_COMPLEX\_SMALL,
51               0.8,
52               cv::Scalar(0, 0, 255));
53   cv::rectangle(frame\_, result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location}, cv::Scalar(100, 100, 100), 1);
54 \}
\end{DoxyCode}
\index{Image\+Window@{Image\+Window}!prepare\+Data@{prepare\+Data}}
\index{prepare\+Data@{prepare\+Data}!Image\+Window@{Image\+Window}}
\subsubsection[{\texorpdfstring{prepare\+Data(const Inference\+Result\+::\+Age\+Gender\+Result \&) override}{prepareData(const InferenceResult::AgeGenderResult &) override}}]{\setlength{\rightskip}{0pt plus 5cm}void Image\+Window\+::prepare\+Data (
\begin{DoxyParamCaption}
\item[{const {\bf Inference\+Result\+::\+Age\+Gender\+Result} \&}]{result}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classImageWindow_a09a86f7b0c0e0eec807a4e1458a057c1}{}\label{classImageWindow_a09a86f7b0c0e0eec807a4e1458a057c1}


Implements \hyperlink{classBaseOutput_a6a51c16ebfd7a58829bfa675e562b8f1}{Base\+Output}.



Definition at line 56 of file output.\+cpp.


\begin{DoxyCode}
56                                                                           \{
57   std::ostringstream out;
58   cv::Rect rect = result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location};
59 
60   out.str(\textcolor{stringliteral}{""});
61   out << \textcolor{stringliteral}{"age gender detection confidence: "} <<
62       \textcolor{stringliteral}{"age is: "} << result.\hyperlink{structInferenceResult_1_1AgeGenderResult_a6c4ec413eb257cea2c02cc53a1cfc272}{age} << \textcolor{stringliteral}{","} <<
63       \textcolor{stringliteral}{"gender is: "} << (result.\hyperlink{structInferenceResult_1_1AgeGenderResult_a8a17d89e0d1b8bde9eb9d862486493c9}{male\_prob} > 0.5)? \textcolor{stringliteral}{"M"}:\textcolor{stringliteral}{"F"};
64   cv::putText(frame\_,
65               out.str(),
66               \textcolor{comment}{//cv::Point2f(result.location.x, result.location.y),}
67               cv::Point2f(0,30),
68               cv::FONT\_HERSHEY\_COMPLEX\_SMALL,
69               0.8,
70               cv::Scalar(0, 0, 255));
71   cv::rectangle(frame\_, result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location}, cv::Scalar(100, 100, 100), 1);
72 \}
\end{DoxyCode}
\index{Image\+Window@{Image\+Window}!prepare\+Data@{prepare\+Data}}
\index{prepare\+Data@{prepare\+Data}!Image\+Window@{Image\+Window}}
\subsubsection[{\texorpdfstring{prepare\+Data(const Inference\+Result\+::\+Head\+Pose\+Result \&) override}{prepareData(const InferenceResult::HeadPoseResult &) override}}]{\setlength{\rightskip}{0pt plus 5cm}void Image\+Window\+::prepare\+Data (
\begin{DoxyParamCaption}
\item[{const {\bf Inference\+Result\+::\+Head\+Pose\+Result} \&}]{result}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classImageWindow_abb0b9b0c103ec0460a2cbeee414b53c4}{}\label{classImageWindow_abb0b9b0c103ec0460a2cbeee414b53c4}


Implements \hyperlink{classBaseOutput_a3549ade1424963fff201fd946075fd4e}{Base\+Output}.



Definition at line 74 of file output.\+cpp.


\begin{DoxyCode}
74                                                                          \{
75   \textcolor{keywordtype}{int} scale  = 50;
76   \textcolor{keywordtype}{int} cx = frame\_.cols / 2;
77   \textcolor{keywordtype}{int} cy = frame\_.rows / 2;
78   \textcolor{keywordtype}{double} yaw = result.\hyperlink{structInferenceResult_1_1HeadPoseResult_a6f9491752ad71d474f7b52f626bc6989}{angle\_y} * CV\_PI / 180.0;
79   \textcolor{keywordtype}{double} pitch = result.\hyperlink{structInferenceResult_1_1HeadPoseResult_aa5451224989c6d65741ff3a90e4c73a7}{angle\_p} * CV\_PI / 180.0;
80   \textcolor{keywordtype}{double} roll = result.\hyperlink{structInferenceResult_1_1HeadPoseResult_a34e1aa51cf21ddc17d874260f174c75e}{angle\_r} * CV\_PI / 180.0;
81   cv::Rect rect = result.\hyperlink{structInferenceResult_1_1Result_a20260cebf785b75132140ab517594660}{location};
82   cv::Point3f cpoint(rect.x + rect.width / 2, rect.y + rect.height / 2, 0);
83   cv::Matx33f Rx(1, 0, 0,
84                  0, cos(pitch), -sin(pitch),
85                  0, sin(pitch), cos(pitch));
86   cv::Matx33f Ry(cos(yaw), 0, -sin(yaw),
87                  0, 1, 0,
88                  sin(yaw), 0, cos(yaw));
89   cv::Matx33f Rz(cos(roll), -sin(roll), 0,
90                  sin(roll), cos(roll), 0,
91                  0, 0, 1);
92 
93   \textcolor{keyword}{auto} r = cv::Mat(Rz * Ry * Rx);
94 
95   \textcolor{keywordflow}{if} (camera\_matrix\_.empty()) \{
96     camera\_matrix\_ = cv::Mat::zeros(3, 3, CV\_32F);
97     camera\_matrix\_.at<\textcolor{keywordtype}{float}>(0) = focal\_length\_;
98     camera\_matrix\_.at<\textcolor{keywordtype}{float}>(2) = static\_cast<float>(cx);
99     camera\_matrix\_.at<\textcolor{keywordtype}{float}>(4) = focal\_length\_;
100     camera\_matrix\_.at<\textcolor{keywordtype}{float}>(5) = static\_cast<float>(cy);
101     camera\_matrix\_.at<\textcolor{keywordtype}{float}>(8) = 1;
102   \}
103 
104   cv::Mat xAxis(3, 1, CV\_32F), yAxis(3, 1, CV\_32F), zAxis(3, 1, CV\_32F),
105       zAxis1(3, 1, CV\_32F);
106 
107   xAxis.at<\textcolor{keywordtype}{float}>(0) = 1 * scale;
108   xAxis.at<\textcolor{keywordtype}{float}>(1) = 0;
109   xAxis.at<\textcolor{keywordtype}{float}>(2) = 0;
110 
111   yAxis.at<\textcolor{keywordtype}{float}>(0) = 0;
112   yAxis.at<\textcolor{keywordtype}{float}>(1) = -1 * scale;
113   yAxis.at<\textcolor{keywordtype}{float}>(2) = 0;
114 
115   zAxis.at<\textcolor{keywordtype}{float}>(0) = 0;
116   zAxis.at<\textcolor{keywordtype}{float}>(1) = 0;
117   zAxis.at<\textcolor{keywordtype}{float}>(2) = -1 * scale;
118 
119   zAxis1.at<\textcolor{keywordtype}{float}>(0) = 0;
120   zAxis1.at<\textcolor{keywordtype}{float}>(1) = 0;
121   zAxis1.at<\textcolor{keywordtype}{float}>(2) = 1 * scale;
122 
123   cv::Mat o(3, 1, CV\_32F, cv::Scalar(0));
124   o.at<\textcolor{keywordtype}{float}>(2) = camera\_matrix\_.at<\textcolor{keywordtype}{float}>(0);
125 
126   xAxis = r * xAxis + o;
127   yAxis = r * yAxis + o;
128   zAxis = r * zAxis + o;
129   zAxis1 = r * zAxis1 + o;
130 
131   cv::Point p1, p2;
132 
133   p2.x = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(
134       (xAxis.at<\textcolor{keywordtype}{float}>(0) / xAxis.at<\textcolor{keywordtype}{float}>(2) * camera\_matrix\_.at<\textcolor{keywordtype}{float}>(0))
135           + cpoint.x);
136   p2.y = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(
137       (xAxis.at<\textcolor{keywordtype}{float}>(1) / xAxis.at<\textcolor{keywordtype}{float}>(2) * camera\_matrix\_.at<\textcolor{keywordtype}{float}>(4))
138           + cpoint.y);
139   cv::line(frame\_, cv::Point(cpoint.x, cpoint.y), p2, cv::Scalar(0, 0, 255), 2);
140 
141   p2.x = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(
142       (yAxis.at<\textcolor{keywordtype}{float}>(0) / yAxis.at<\textcolor{keywordtype}{float}>(2) * camera\_matrix\_.at<\textcolor{keywordtype}{float}>(0))
143           + cpoint.x);
144   p2.y = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(
145       (yAxis.at<\textcolor{keywordtype}{float}>(1) / yAxis.at<\textcolor{keywordtype}{float}>(2) * camera\_matrix\_.at<\textcolor{keywordtype}{float}>(4))
146           + cpoint.y);
147   cv::line(frame\_, cv::Point(cpoint.x, cpoint.y), p2, cv::Scalar(0, 255, 0), 2);
148 
149   p1.x = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(
150       (zAxis1.at<\textcolor{keywordtype}{float}>(0) / zAxis1.at<\textcolor{keywordtype}{float}>(2) * camera\_matrix\_.at<\textcolor{keywordtype}{float}>(0))
151           + cpoint.x);
152   p1.y = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(
153       (zAxis1.at<\textcolor{keywordtype}{float}>(1) / zAxis1.at<\textcolor{keywordtype}{float}>(2) * camera\_matrix\_.at<\textcolor{keywordtype}{float}>(4))
154           + cpoint.y);
155 
156   p2.x = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(
157       (zAxis.at<\textcolor{keywordtype}{float}>(0) / zAxis.at<\textcolor{keywordtype}{float}>(2) * camera\_matrix\_.at<\textcolor{keywordtype}{float}>(0))
158           + cpoint.x);
159   p2.y = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(
160       (zAxis.at<\textcolor{keywordtype}{float}>(1) / zAxis.at<\textcolor{keywordtype}{float}>(2) * camera\_matrix\_.at<\textcolor{keywordtype}{float}>(4))
161           + cpoint.y);
162   cv::line(frame\_, p1, p2, cv::Scalar(255, 0, 0), 2);
163   cv::circle(frame\_, p2, 3, cv::Scalar(255, 0, 0), 2);
164 \};
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/openvino\+\_\+service/outputs/\hyperlink{output_8h}{output.\+h}\item 
lib/outputs/\hyperlink{output_8cpp}{output.\+cpp}\end{DoxyCompactItemize}
